---
import { Image } from 'astro:assets';
import { getEntry } from 'astro:content';
import { Icon } from 'astro-icon';
import { Markdown } from '@astropub/md';
import splitMarkdown from '@utils/splitmarkdown';

import Container from '@components/Container.astro';
import SchoolInfos from '@components/SchoolInfos.astro';
import Layout from '@layouts/Layout.astro';
import SocialLinks from '@components/links/SocialLinks.astro';

const entry = await getEntry('school', 'dragontigre');

const { data: school } = entry;
const { introContent, mainContent } = splitMarkdown(entry.body);
---

<Layout>
	<Container>
		<h1 class="mb-8 mt-12 text-7xl">L'École</h1>

		<div class="mb-16 flex w-2/3 gap-12">
			<p>{school.intro}</p>
			<p>
				Lorem ipsum dolor sit amet consectetur adipisicing elit. Iste fugiat modi asperiores eaque
				doloribus nesciunt? Unde consectetur vero exercitationem fugiat totam, corrupti soluta,
				aliquam at error maxime, libero dolorem earum?
			</p>
		</div>

		<Image
			src={school.cover}
			class="h-[750px] object-cover"
			alt="Entrée de l'école boulevard Guiton à La Rochelle"
		/>

		<section class="mt-28">
			<h2 class="font-bold uppercase">Informations pratiques</h2>
			<div class="grid grid-cols-2 gap-24 py-16">
				<a href={school.address.openstreetmap} title="Ouvrir le plan" class="relative">
					<Image src={school.address.imageMap} alt="Adresse de l'école" />
					<div
						class="group absolute inset-0 z-10 flex items-center justify-center bg-black bg-opacity-0 text-white transition-all hover:bg-opacity-40"
					>
						<Icon name="mdi:magnify-plus" class="h-24 opacity-0 group-hover:opacity-100" />
					</div>
				</a>
				<div class="flex flex-col gap-12">
					<SchoolInfos />
					<SocialLinks />
				</div>
			</div>
		</section>

		<section class="mt-8">
			<h2 class="font-bold uppercase">Histoire de l'école</h2>
			<div class="grid w-2/3 grid-cols-2 gap-16 py-8">
				<div class="prose prose-p:text-white">
					<Markdown of={introContent} />
				</div>
				<div class="prose prose-p:text-white prose-strong:text-white">
					<Markdown of={mainContent} />
				</div>
			</div>
		</section>
	</Container>
</Layout>
