---
import { type CollectionEntry, getCollection } from 'astro:content';
import { Image } from 'astro:assets';
import Icon from 'astro-icon';

import Layout from '@layouts/Layout.astro';
import H1 from '@components/H1.astro';
import Section from '@components/Section.astro';
import Container from '@components/Container.astro';
import Prose from '@components/Prose.astro';
import H2 from '@components/H2.astro';

interface Props {
	entry: CollectionEntry<'teacher'>;
}

export async function getStaticPaths() {
	const teachers = await getCollection('teacher');
	return teachers.map((entry) => ({
		params: { slug: entry.slug },
		props: { entry },
	}));
}

/*
first: Laoshi
last: Shaman
rank: Institutrice
cover: ./cover.jpg
avatar: ./avatar.jpg
introduction: Lorem ipsum dolor sit amet consectetur adipisicing elit. Soluta velit sapiente vel, quaerat numquam sequi. Soluta maxime, iure molestiae architecto incidunt necessitatibus dolorem officiis repudiandae, ab eligendi doloremque, ullam perspiciatis!
description: Porro quos modi perspiciatis voluptates itaque quis earum. Velit quisquam est iusto, cumque error sunt unde consectetur corrupti maxime laudantium omnis, ab sit tempore quibusdam! Laborum, similique? Sunt, deleniti quo!
year: 2002
diploma: Lorem ipsum dolor sit amet consectetur
palmares: Lorem ipsum dolor sit amet consectetur
*/

const { entry } = Astro.props;
const { Content } = await entry.render();

const name = `${entry.data.first} ${entry.data.last}`;
---

<Layout title={name} description={entry.data.description}>
	<Container>
		<Section>
			<div class="flex">
				<div class="flex flex-1 flex-col gap-8">
					<H1>{name}</H1>
					<div class="prose prose-xl max-w-2xl text-white">
						{entry.data.introduction}
					</div>
					<div class="flex items-center gap-3">
						<Icon name="MaterialSymbolsCalendarMonthRounded" class="h-8" />
						Pratique le Kung-Fu depuis {entry.data.year}
					</div>
				</div>
				<div class="flex-1">
					<Image src={entry.data.cover} alt={`Portrait de ${name}`} class="w-auto" />
				</div>
			</div>
		</Section>
		<Section>
			<div class="flex-start flex">
				<div class="flex-1">
					<div class="flex items-center gap-3">
						<Icon name="vaadin_diploma" class="h-8" />
						<span class="font-semibold uppercase">Diplômes</span>
					</div>
				</div>

				<div class="flex-1">
					<Image src={entry.data.diploma} alt={`Diplôme de ${name}`} class="w-auto" />
				</div>
			</div>
		</Section>

		<Section>
			<div class="flex-start flex">
				<div class="flex-1">
					<div class="flex items-center gap-3">
						<Icon name="emojione-monotone_sports-medal" class="h-8" />
						<span class="font-semibold uppercase">Palmarès</span>
					</div>
				</div>

				<div class="flex-1">
					<Image src={entry.data.palmares} alt={`Compétition de ${name}`} class="w-auto" />
				</div>
			</div>
		</Section>
	</Container>
</Layout>
