---
import { getCollection } from 'astro:content';

import Container from '@components/Container.astro';
import NewsCard from '@components/NewsCard.astro';
import CTALink from '@components/links/CTALink.astro';

interface Props {
	nb?: number;
}
const { nb = 4 } = Astro.props;

const news = (await getCollection('news'))
	.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
	.slice(0, nb);

const baseURL = import.meta.env.BASE_URL;
const linkNews = `${baseURL}/ecole/actualites`;
---

<section class="py-16">
	<Container>
		<h2 class="uppercase">Actualités</h2>
		<div class="my-16 grid grid-cols-2 gap-8">
			{news.map(({ data, slug }) => <NewsCard {data} {slug} />)}
		</div>
		<CTALink href={linkNews} label="Voir toutes les actualités" icon="carbon:arrow-right" outline />
	</Container>
</section>
